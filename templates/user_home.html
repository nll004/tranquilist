{% extends 'base.html' %}

{% block page_title %} My TranquiList {% endblock %}

{% block page_content %}
    <a href="/">Home</a>
    <a href="/logout">Log Out</a>
    <hr>
    <h1>TranquiList</h1>
    <p>Welcome {{ user.fname }}</p>
    <blockquote id="daily-quote">{{ quote.text }}</blockquote>

    <h2>Upcoming Tasks:</h2>
    <section>
        <h2>Today</h2>
        <ul class='today'>
            {% for list in user.lists %}
                {% if list.time_line_id == 1 %}
                    <li>List: {{ list.name }}
                        {% for task in list.subtasks %}
                            <ul>
                                <li>Subtask: {{ task.name }} Details: {{ task.details }} Complete: {{ task.complete }}</li>
                            </ul>
                        {% endfor %}
                    </li>
                {% endif %}
            {% endfor %}
        </ul>
    </section>
    <section>
        <h2>Soon</h2>
        <ul class='soon'>
            {% for list in user.lists %}
                {% if list.time_line_id == 2 %}
                    <li>List: {{ list.name }}
                        {% for task in list.subtasks %}
                            <ul>
                                <li>Subtask: {{ task.name }} Details: {{ task.details }} Complete: {{ task.complete }}</li>
                            </ul>
                        {% endfor %}
                    </li>
                {% endif %}
            {% endfor %}
        </ul>
    </section>
    <section>
        <h2>Later</h2>
        <ul class='eventually'>
            {% for list in user.lists %}
                {% if list.time_line_id == 1 %}
                    <li>List: {{ list.name }}
                        {% for task in list.subtasks %}
                            <ul>
                                <li>Subtask: {{ task.name }} Details: {{ task.details }} Complete: {{ task.complete }}</li>
                            </ul>
                        {% endfor %}
                    </li>
                {% endif %}
            {% endfor %}
        </ul>


    </section>
    <section id="calendar-sect">
        <h2>Calendar</h2>
        <ul id="calendar-events">
            {% for event in events %}
                {% if event['start'].date %}
                    <li>
                        <p><span>Date: </span> {{event['start'].date }}</p>
                        <p><span>Event: </span>
                            <a href="{{ event['htmlLink']}}" target="_blank">
                                {{event['summary'] }}
                            </a>
                        </p>
                    </li>
                {% elif event['start'].dateTime %}
                    <li>
                        <p>
                            <span>Date: </span> {{event['start'].dateTime }}

                        </p>
                        <p><span>Event: </span>
                            <a href="{{ event['htmlLink']}}" target="_blank">
                                {{event['summary'] }}
                            </a>
                        </p>
                    </li>
                {% endif %}
            {% endfor %}
        </ul>
    </section>
{% endblock %}
